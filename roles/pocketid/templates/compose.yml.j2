# Pocket ID â€” OIDC/Passkey provider at https://id.mol.la
# Pass pocketid_encryption_key via vars (e.g. -e "@vars/pocketid_vars.yml"). Generate with: openssl rand -base64 32
services:
  pocketid:
    image: {{ pocketid_image | default('ghcr.io/pocket-id/pocket-id:v2') }}
    container_name: pocketid-{{ inventory_hostname }}
    restart: unless-stopped
    ports:
      - "1411:1411"
    volumes:
      - pocketid_data:/app/data
    environment:
      APP_URL: "https://id.mol.la"
      ENCRYPTION_KEY: "{{ pocketid_encryption_key }}"
      TRUST_PROXY: "true"
      {% if pocketid_maxmind_license_key is defined and pocketid_maxmind_license_key | length > 0 %}
      MAXMIND_LICENSE_KEY: "{{ pocketid_maxmind_license_key }}"
      {% endif %}

volumes:
  pocketid_data:
