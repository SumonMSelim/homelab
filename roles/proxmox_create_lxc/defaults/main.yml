---
# Defaults for creating LXCs on Proxmox VE
# Override in playbook vars or -e. Pass API token (proxmox_api_*) and proxmox_container_password via vars file or -e.

proxmox_api_host: "192.168.178.110"
proxmox_api_port: 8006
proxmox_node: "one"
proxmox_ostemplate: "media-storage:vztmpl/ubuntu-24.04-docker_amd64.tar.zst"
proxmox_disk: "local-lvm:10"
proxmox_cores: 1
proxmox_memory: 1024
proxmox_swap: 512
proxmox_gw: "192.168.178.1"
proxmox_bridge: "vmbr0"

proxmox_ssh_pubkey: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIGPdbWBj0cioTEXSeNjotNxDol9QRGuhRTI1q3xsK4+D ansible-homelab"

# Host path where media-storage is mounted on the Proxmox node (for Jellyfin LXC bind mount).
# Set to the path shown in Datacenter → Storage → media-storage.
jellyfin_media_storage_host_path: "/mnt/media"

# LXCs to create.
proxmox_containers:
  - vmid: 120
    hostname: ansible
    ip: "192.168.178.120/24"
    description: "Ansible as host for the homelab control plane"
    unprivileged: 1
  - vmid: 121
    hostname: caddy
    ip: "192.168.178.121/24"
    description: "Caddy Reverse Proxy & Cloudflare Tunnel"
    unprivileged: 1
  - vmid: 122
    hostname: pocketid
    ip: "192.168.178.122/24"
    description: "PocketID for identity management"
    unprivileged: 1
  - vmid: 123
    hostname: vault
    ip: "192.168.178.123/24"
    description: "HashiCorp Vault — secrets management"
    unprivileged: 1
  - vmid: 124
    hostname: monitoring
    ip: "192.168.178.124/24"
    description: "Grafana + Prometheus monitoring stack"
    unprivileged: 1
    cores: 2
    memory: 2048
    disk: "local-lvm:20"
  - vmid: 130
    hostname: postgresql
    ip: "192.168.178.130/24"
    description: "PostgreSQL database server"
    unprivileged: 1
    cores: 2
    memory: 2048
    disk: "local-lvm:20"
  - vmid: 131
    hostname: mysql
    ip: "192.168.178.131/24"
    description: "MySQL database server"
    unprivileged: 1
    cores: 2
    memory: 2048
    disk: "local-lvm:20"
  - vmid: 132
    hostname: redis
    ip: "192.168.178.132/24"
    description: "Redis in-memory data store"
    unprivileged: 1
  - vmid: 133
    hostname: mongodb
    ip: "192.168.178.133/24"
    description: "MongoDB document database"
    unprivileged: 1
  - vmid: 140
    hostname: jellyfin
    ip: "192.168.178.140/24"
    description: "Jellyfin media server"
    unprivileged: 1
    cores: 2
    memory: 4096
    disk: "local-lvm:10"
    mount_volumes:
      - id: mp0
        host_path: "{{ jellyfin_media_storage_host_path }}"
        mountpoint: /media
  - vmid: 141
    hostname: arr
    ip: "192.168.178.141/24"
    description: "*arr stack — qBittorrent, Prowlarr, Radarr, Sonarr"
    unprivileged: 1
    cores: 2
    memory: 2048
    disk: "local-lvm:15"
    mount_volumes:
      - id: mp0
        host_path: "{{ jellyfin_media_storage_host_path }}"
        mountpoint: /media
  - vmid: 142
    hostname: immich
    ip: "192.168.178.142/24"
    description: "Immich — self-hosted photo/video backup"
    unprivileged: 1
    cores: 2
    memory: 4096
    disk: "local-lvm:20"
  - vmid: 253
    hostname: adguard-primary
    ip: "192.168.178.253/24"
    description: "AdGuard Home Primary (DNS + DHCP)"
    unprivileged: 0
  - vmid: 254
    hostname: adguard-secondary
    ip: "192.168.178.254/24"
    description: "AdGuard Home Secondary (DNS)"
    unprivileged: 0
